<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Documentation Technique MR-biosoft Annotation Platform</title>
  <meta name="description" content="Documentation pour le site d’Annotation de Génomes de Prokaryotes" />
  <meta name="generator" content="bookdown 0.22.3 and GitBook 2.6.7" />

  <meta property="og:title" content="Documentation Technique MR-biosoft Annotation Platform" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Documentation pour le site d’Annotation de Génomes de Prokaryotes" />
  <meta name="github-repo" content="MR-biosoft/AnnotationWebsite" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Documentation Technique MR-biosoft Annotation Platform" />
  
  <meta name="twitter:description" content="Documentation pour le site d’Annotation de Génomes de Prokaryotes" />
  

<meta name="author" content="Théo Roncalli" />
<meta name="author" content="Gustavo Magaña López" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  

<link rel="next" href="django.html"/>
<script src="libs/header-attrs-2.9/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://github.com/MR-biosoft/AnnotationWebsite"> Documentation Technique MR-biosoft </a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#deps"><i class="fa fa-check"></i>Gestion des Dépendances</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#organisation"><i class="fa fa-check"></i>Organisation du code serveur</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="django.html"><a href="django.html"><i class="fa fa-check"></i>Introduction à django</a>
<ul>
<li class="chapter" data-level="" data-path="django.html"><a href="django.html#commands"><i class="fa fa-check"></i>Guide de commandes de base</a></li>
<li class="chapter" data-level="" data-path="django.html"><a href="django.html#commandsbis"><i class="fa fa-check"></i>Commandes développées par l’équipe</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Documentation Technique MR-biosoft Annotation Platform</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="header">
<h1 class="title">Documentation Technique MR-biosoft Annotation Platform</h1>
<p class="author"><em>Théo Roncalli</em></p>
<p class="author"><em>Gustavo Magaña López</em></p>
</div>
<div id="intro" class="section level1 unnumbered">
<h1>Introduction</h1>
<p>Le projet repose sur deux installations principalement: PostgreSQL et Python.
Le site a été conçu en utilisant <a href="https://www.djangoproject.com/"><em>django</em></a>, un
<em>framework</em> pour le développement web écrit en langage Python. Toute la partie
<em>front-end</em> du projet a été conçue dès zéro, en définissant les styles CSS
sans s’appuyer sur des <em>frameworks</em> tels que bootstrap. Le système de gestion
de bases de données relationnelles choisi est <em>PostgreSQL</em>.</p>
<p>Toutes les explications et instructions trouvées dans ce document
partent de l’hypothèse que <code>Python3.8+</code> et <code>psql (PostgreSQL) 12.7+</code> sont
installés dans votre système. Si vous n’avez pas PostgreSQL, je vous
recommande de suivre
<a href="https://www.lri.fr/~schevalier/doc/teaching/tutoriels/PostgreSQL_install.html">cette guide</a>.
Python est installé par défaut en la plupart
de distributions GNU/Linux. Tout le développement de l’application a été fait
en Ubuntu et Pop!_OS, toutes les deux basées sur Debian. Aucune garantie n’est
donnée pour d’autres distributions.</p>
<div id="deps" class="section level2 unnumbered">
<h2>Gestion des Dépendances</h2>
<ul>
<li><a href="https://python-poetry.org/">Poetry</a> for Python dependencies management.</li>
<li><a href="https://www.postgresql.org/">PostgreSQL</a> for database management.</li>
</ul>
<p>La gestion des dépendances du projet a été faite grâce à <em>Poetry</em>, un gestionnaire
de paquets pour Python qui offre l’avantage d’être <span class="math inline">\(100\%\)</span> reproductible,
contrairement à d’autres plateformes de gestion d’environnements très populaires
telles que <em>conda</em>. Le manque de reproductibilité de conda vient du fait que son
<em>channel</em> principal n’est pas un miroir de l’index de paquets python (<a href="https://pypi.org/">PyPI</a>).
Pour installer différents paquets, plusieurs <em>channels</em> doivent être ajoutés.
Parfois on ne trouve pas le paquet et on finit par l’installer directement via <code>pip</code>.
Or, les paquets installés via <code>pip</code> ne seront pas suivis par conda. Si l’on essaie
de partager un fichier <code>env.yml</code> produit par conda, on n’a aucune garantie que tous
les paquets seront inclus dans le fichier.</p>
<p>Par contre, poetry a un <em>dependency-solver</em> très robuste qui permet de trouver
des possibles conflits de dépendances lors de l’ajout via la commande <code>poetry add &lt;dependency&gt;</code>.
En étant stricte et informant l’utilisateur des conflits lors de l’ajout, en suggérant
comment les résoudre (si possible), poetry garantit la
Par défaut, poetry installe les paquets depuis le PyPI, ce qui veut dire qu’il peut
trouver tout paquet de l’index officiel de python.</p>
<p>Pour installer poetry et configurer les variables d’environnement nécessaires
afin de lancer le serveur, il est recommandé de suivre le guide
<a href="https://github.com/MR-biosoft/AnnotationWebsite">README du projet</a>.</p>
<p>Un script pour faciliter la configuration se trouve dans le livrable (pas dans
le repo car l’inclure dans un répertoire publique représenterait une grande
vulnerabilité).</p>
<p>Une fois que script <code>bootstrap_installation.bash</code> exécuté, une nouvelle
session <code>bash</code> doit être démarrée afin d’avoir accès à la commande poetry.</p>
<p>À l’intérieur du répertoire où se trouvent <code>pyproject.toml</code> et <code>poetry.lock</code>,
exécuter <code>poetry install</code> pour installer toutes les dépendances du projet.
Puis, exécuter <code>poetry shell</code> pour activer l’environnement virtuel et lancer
l’application.</p>
</div>
<div id="organisation" class="section level2 unnumbered">
<h2>Organisation du code serveur</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="index.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">─</span> poetry.lock</span>
<span id="cb1-2"><a href="index.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="ex">─</span> pyproject.toml</span>
<span id="cb1-3"><a href="index.html#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="ex">─</span> prokaryote</span>
<span id="cb1-4"><a href="index.html#cb1-4" aria-hidden="true" tabindex="-1"></a> <span class="ex">─</span> annotation <span class="co"># Application principale</span></span>
<span id="cb1-5"><a href="index.html#cb1-5" aria-hidden="true" tabindex="-1"></a> <span class="ex">─</span> bootstrap_installation.bash <span class="co"># script d&#39;aide à l&#39;installation</span></span>
<span id="cb1-6"><a href="index.html#cb1-6" aria-hidden="true" tabindex="-1"></a> <span class="ex">─</span> createdb.bash <span class="co"># idem mais pour la création des tables de la base de données</span></span>
<span id="cb1-7"><a href="index.html#cb1-7" aria-hidden="true" tabindex="-1"></a> <span class="ex">─</span> dbsetup <span class="co"># Application django pour gestion de la base de données</span></span>
<span id="cb1-8"><a href="index.html#cb1-8" aria-hidden="true" tabindex="-1"></a> <span class="ex">─</span> debug.py <span class="co"># Script pour analyser la sortie des error-logs </span></span>
<span id="cb1-9"><a href="index.html#cb1-9" aria-hidden="true" tabindex="-1"></a> <span class="ex">─</span> gene_importation_error_log.jsonl <span class="co"># logs d&#39;erreur liés à problèmes de parsing</span></span>
<span id="cb1-10"><a href="index.html#cb1-10" aria-hidden="true" tabindex="-1"></a> <span class="ex">─</span> home <span class="co"># Application qui gère la page d&#39;accueil</span></span>
<span id="cb1-11"><a href="index.html#cb1-11" aria-hidden="true" tabindex="-1"></a> <span class="ex">─</span> manage.py <span class="co"># Couteau Suisse de django. </span></span>
<span id="cb1-12"><a href="index.html#cb1-12" aria-hidden="true" tabindex="-1"></a> <span class="ex">─</span> prokaryote <span class="co"># app. de base qui fait le lien entre toutes les autres</span></span>
<span id="cb1-13"><a href="index.html#cb1-13" aria-hidden="true" tabindex="-1"></a> <span class="ex">─</span> runall.bash <span class="co"># Script qui permet d&#39;effacer et recréer la base et importer</span></span>
<span id="cb1-14"><a href="index.html#cb1-14" aria-hidden="true" tabindex="-1"></a>               <span class="co"># toutes les données</span></span>
<span id="cb1-15"><a href="index.html#cb1-15" aria-hidden="true" tabindex="-1"></a> <span class="ex">─</span> static <span class="co"># répertoire contenant le css de tout le site</span></span>
<span id="cb1-16"><a href="index.html#cb1-16" aria-hidden="true" tabindex="-1"></a> <span class="ex">─</span> upload <span class="co"># Application pour importer des nouvelles séquences</span></span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>

<a href="django.html" class="navigation navigation-next navigation-unique" aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/index.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
